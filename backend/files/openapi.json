{"openapi":"3.0.2","info":{"title":"Progetto CHeArIA","description":"\n# Documentazione del backend del progetto CHeArIA\n","contact":{"url":"https://progettochearia.it"},"license":{"name":"GNU General Public License v3.0","url":"https://raw.githubusercontent.com/liceocremona/chearia-backend/main/LICENSE"},"version":"1.0"},"servers":[{"url":"/v1"}],"paths":{"/board/time":{"get":{"tags":["board"],"summary":"Gettime","operationId":"gettime_board_time_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/board/timems/{tz}":{"get":{"tags":["board"],"summary":"Gettimems","operationId":"gettimems_board_timems__tz__get","parameters":[{"required":true,"schema":{"title":"Tz","type":"string"},"name":"tz","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/board/timems":{"get":{"tags":["board"],"summary":"Gettimems","operationId":"gettimems_board_timems_get","parameters":[{"required":false,"schema":{"title":"Tz","type":"string"},"name":"tz","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/board/time/hour":{"get":{"tags":["board"],"summary":"Gettime H","operationId":"gettime_h_board_time_hour_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/board/time/min":{"get":{"tags":["board"],"summary":"Gettime Min","operationId":"gettime_min_board_time_min_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/board/date/{tz}":{"get":{"tags":["board"],"summary":"Getdate","operationId":"getdate_board_date__tz__get","parameters":[{"required":true,"schema":{"title":"Tz","type":"string"},"name":"tz","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/board/date":{"get":{"tags":["board"],"summary":"Getdate","operationId":"getdate_board_date_get","parameters":[{"required":false,"schema":{"title":"Tz","type":"string"},"name":"tz","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/board/putdata/{dataid}":{"put":{"tags":["board"],"summary":"Putdata","operationId":"putdata_board_putdata__dataid__put","parameters":[{"required":true,"schema":{"title":"Dataid","pattern":"(itwork|example|CO|altitude|humidity|ozone|pressure|temperature)","type":"string"},"name":"dataid","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__board__Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/resources/graph/all":{"get":{"tags":["resources"],"summary":"Lista di tutti i grafici","operationId":"list_all_graphs_resources_graph_all_get","parameters":[{"required":false,"schema":{"title":"Type","type":"string"},"name":"type","in":"query"}],"responses":{"200":{"description":"Return all graphs","content":{"application/json":{"schema":{"title":"Graphs","type":"array","items":{"type":"string"}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/resources/graph/query":{"post":{"tags":["resources"],"summary":"Query Graph","operationId":"query_graph_resources_graph_query_post","parameters":[{"required":false,"schema":{"title":"Dataid","type":"array","items":{"type":"string"},"default":["itwork"]},"name":"dataid","in":"query"},{"required":false,"schema":{"title":"Gte","maxLength":19,"minLength":10,"type":"string"},"name":"gte","in":"query"},{"required":false,"schema":{"title":"Lte","maxLength":19,"minLength":10,"type":"string"},"name":"lte","in":"query"},{"required":false,"schema":{"title":"Unique","maxLength":10,"minLength":10,"pattern":"((((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8]))))","type":"string"},"name":"unique","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"deprecated":true}},"/resources/datas":{"get":{"tags":["resources"],"summary":"Cerca i dati per tipo","description":"Questa funzione permette di cercare per dato e per tipo i dati raccolti nel DB, \n[Trova i dati](https://web.progettochearia.it)","operationId":"list_all_data_resources_datas_get","parameters":[{"required":true,"schema":{"title":"Dataid","pattern":"(itwork|example|CO|altitude|humidity|ozone|pressure|temperature)","type":"array","items":{"pattern":"(itwork|example|CO|altitude|humidity|ozone|pressure|temperature)","type":"string"}},"name":"dataid","in":"query"},{"description":"Data d'inizio, ex: 2022-05-15_10:24:00 or 2022-05-15","required":false,"schema":{"title":"Data iniziale","maxLength":19,"minLength":10,"pattern":"^(((((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8])))_([01][0-9]|2[0-3]):([012345][0-9]):([012345][0-9]))|(((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8]))))?$","type":"string","description":"Data d'inizio, ex: 2022-05-15_10:24:00 or 2022-05-15"},"name":"gte","in":"query"},{"description":"Data di fine, ex: 2022-10-15_16:12:00 or 2022-10-15","required":false,"schema":{"title":"Data finale","maxLength":19,"minLength":10,"pattern":"^(((((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8])))_([01][0-9]|2[0-3]):([012345][0-9]):([012345][0-9]))|(((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8]))))?$","type":"string","description":"Data di fine, ex: 2022-10-15_16:12:00 or 2022-10-15"},"name":"lte","in":"query"},{"description":"Giorno singolo, ex: 2022-10-15","required":false,"schema":{"title":"Giorno singolo","maxLength":10,"minLength":10,"pattern":"^(((19|20)([2468][048]|[13579][26]|0[48])|2000)-02-29|((19|20)[0-9]{2}-(0[4678]|1[02])-(0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}-(0[1359]|11)-(0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}-02-(0[1-9]|1[0-9]|2[0-8])))?$","type":"string","description":"Giorno singolo, ex: 2022-10-15"},"name":"day","in":"query"},{"required":false,"schema":{"title":"Type","pattern":"(html|json)","type":"string"},"name":"type","in":"query"},{"required":false,"schema":{"title":"Sort","pattern":"(asc|desc)","type":"string"},"name":"sort","in":"query"}],"responses":{"200":{"description":"sucess response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DatasResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/resources/datas/last":{"get":{"tags":["resources"],"summary":"Ritorna l'ultimo dato per tipo","operationId":"list_last_data_resources_datas_last_get","parameters":[{"required":true,"schema":{"title":"Dataid","pattern":"(itwork|example|CO|altitude|humidity|ozone|pressure|temperature)","type":"array","items":{"pattern":"(itwork|example|CO|altitude|humidity|ozone|pressure|temperature)","type":"string"}},"name":"dataid","in":"query"},{"required":false,"schema":{"title":"Type","pattern":"(html|json)","type":"string"},"name":"type","in":"query"}],"responses":{"200":{"description":"sucess response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/resources/datas_stream":{"get":{"tags":["resources"],"summary":"Stream dei dati in tempo reale","description":"Questa funzione restituisce uno streaming dei dai che arrivano dai sensori","operationId":"datas_streams_resources_datas_stream_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"DataResponse":{"title":"DataResponse","required":["dataid"],"type":"object","properties":{"dataid":{"$ref":"#/components/schemas/routers__resources__Data"}}},"DatasResponse":{"title":"DatasResponse","required":["dataid"],"type":"object","properties":{"dataid":{"title":"Dataid","type":"array","items":{"$ref":"#/components/schemas/routers__resources__Data"}}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"Metadata":{"title":"Metadata","required":["id"],"type":"object","properties":{"id":{"title":"Id","type":"string"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"routers__board__Data":{"title":"Data","required":["datavalue","key"],"type":"object","properties":{"datavalue":{"title":"Datavalue","type":"number","description":"The value of data from sensor"},"timestamptz":{"title":"Timestamptz","maxLength":3,"minLength":2,"type":"string","description":"The timzone to use to calculate the timestamp"},"key":{"title":"Key","maxLength":32,"minLength":32,"type":"string","description":"The key for authenticate request","format":"binary"}}},"routers__resources__Data":{"title":"Data","required":["time","value","metadata"],"type":"object","properties":{"time":{"title":"Time","type":"string"},"value":{"title":"Value","type":"number"},"metadata":{"$ref":"#/components/schemas/Metadata"}}}}},"tags":[{"name":"resources","description":"REST API dedicate alla gestione delle risorse, permettono di recuperare i dati dal DB e i grafici elaborati dal server"},{"name":"board","description":"REST API dedicate all'hardware del progetto, per esempio quella per caricare i dati su DB"}]}